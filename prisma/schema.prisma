datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id            Int    @id @default(autoincrement())
  name          String?
  email         String?   @unique
  emailVerified DateTime?
  image         String?
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt

  // Fields for password-based authentication (optional)
  password      String?

  // Fields for OAuth providers
  googleId      String?   @unique
  facebookId    String?   @unique

  // Additional fields for user profile
  firstName     String?
  lastName      String?
  bio           String?

  // Relations to agents
  agents        Agent[]
}

model Agent {
  id          Int      @id @default(autoincrement())
  name        String
  role        String
  tone        String?
  description String?
  status      String   @default("active")
  user        User     @relation(fields: [userId], references: [id])
  userId      Int
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  // Relations
  prompts     AgentPrompt[]
  activities  Activity[]
}

model AgentPrompt {
  id        Int      @id @default(autoincrement())
  prompt    String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Relations
  agentId   Int
  agent     Agent    @relation(fields: [agentId], references: [id])
}

model Activity {
  id          Int      @id @default(autoincrement())
  prompt      String?
  input       String
  output      String
  result      Boolean
  timestamp   DateTime @default(now())

  // Relations
  agentId     Int
  agent       Agent    @relation(fields: [agentId], references: [id])
}